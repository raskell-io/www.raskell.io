<!doctype html><html prefix="og: https://ogp.me/ns#" lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="dark light" name=color-scheme><title>Disk space maintenance on Void Linux | Raskell</title><meta content="What to do when disk space is full after not paying attention after many months if not years of using Void Linux." name=description><meta content="platform automation, edge systems, applied security, open standards, Rust, DevOps, infrastructure" name=keywords><meta content=Raffael name=author><meta content="index, follow" name=robots><meta content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" name=googlebot><link href=https://raskell.io/articles/disk-space-void-linux-maintenance/ rel=canonical><meta content=article property=og:type><meta content=https://raskell.io/articles/disk-space-void-linux-maintenance/ property=og:url><meta content="Raskell | Tech web space curated by Raffael" property=og:site_name><meta content="Disk space maintenance on Void Linux | Raskell" property=og:title><meta content="What to do when disk space is full after not paying attention after many months if not years of using Void Linux." property=og:description><meta content=https://raskell.io/void-disk-usage.avif property=og:image><meta content="Disk space maintenance on Void Linux" property=og:image:alt><meta content=en property=og:locale><meta content=Raffael property=article:author><meta content=2024-05-01T00:00:00+00:00 property=article:published_time><meta content=summary_large_image name=twitter:card><meta content=https://raskell.io/articles/disk-space-void-linux-maintenance/ name=twitter:url><meta content="Disk space maintenance on Void Linux | Raskell" name=twitter:title><meta content="What to do when disk space is full after not paying attention after many months if not years of using Void Linux." name=twitter:description><meta content=https://raskell.io/void-disk-usage.avif name=twitter:image><meta content="Disk space maintenance on Void Linux" name=twitter:image:alt><meta content=@raskelll name=twitter:site><meta content=@raskelll name=twitter:creator><meta content="Disk space maintenance on Void Linux | Raskell" itemprop=name><meta content="What to do when disk space is full after not paying attention after many months if not years of using Void Linux." itemprop=description><meta content=Raskell name=application-name><meta media="(prefers-color-scheme: dark)" content=#cba6f7 name=theme-color><meta media="(prefers-color-scheme: light)" content=#8839ef name=theme-color><link href=https://raskell.io/favicon.ico rel=icon sizes=48x48><link href=https://raskell.io/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=https://raskell.io/icon-192.png rel=icon sizes=192x192 type=image/png><link href=https://raskell.io/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=https://raskell.io/site.webmanifest rel=manifest><link title="RSS Feed for Raskell" href=https://raskell.io/rss.xml rel=alternate type=application/rss+xml><link href=https://raskell.io/style.css rel=stylesheet><script src=https://unpkg.com/lucide@latest/dist/umd/lucide.min.js></script><script>(()=>{const a=`ThemeColorScheme`;const b=`auto`;if(!localStorage.getItem(a)){localStorage.setItem(a,b)}})()</script><script>(()=>{let e=`dark`,d=`auto`;const a=`ThemeColorScheme`;const b=localStorage.getItem(a);const c=window.matchMedia(`(prefers-color-scheme: dark)`).matches===!0;document.documentElement.dataset.themeSetting=b||d;if(b==e||b===d&&c){document.documentElement.dataset.userColorScheme=e}else{document.documentElement.dataset.userColorScheme=`light`}})()</script><script type=application/ld+json>
    {
        "@context": "https://schema.org",
        "@graph": [
            {
                "@type": "WebSite",
                "@id": "https://raskell.io/#website",
                "url": "https://raskell.io",
                "name": "Raskell",
                "description": "Writing about platform automation, edge systems, applied security, and open standards. Building automation-first platforms that survive production reality.",
                "publisher": {
                    "@id": "https://raskell.io/#person"
                },
                "inLanguage": "en"
            },
            {
                "@type": "Person",
                "@id": "https://raskell.io/#person",
                "name": "Raffael",
                "url": "https://raskell.io"
                ,"sameAs": [
                    "https:&#x2F;&#x2F;github.com&#x2F;raffaelschneider"
                    ,"https:&#x2F;&#x2F;ch.linkedin.com&#x2F;in&#x2F;raffael-e-schneider"
                    ,"https:&#x2F;&#x2F;twitter.com&#x2F;raskelll"
                ]
            },
            {
                "@type": "WebPage",
                "@id": "https://raskell.io/articles/disk-space-void-linux-maintenance//#webpage",
                "url": "https://raskell.io/articles/disk-space-void-linux-maintenance/",
                "name": "Disk space maintenance on Void Linux",
                "description": "What to do when disk space is full after not paying attention after many months if not years of using Void Linux.",
                "isPartOf": {
                    "@id": "https://raskell.io/#website"
                },
                "inLanguage": "en"
                ,
                "datePublished": "2024-05-01T00:00:00+00:00"
                
                
            }
            ,
            {
                "@type": "Article",
                "@id": "https://raskell.io/articles/disk-space-void-linux-maintenance//#article",
                "headline": "Disk space maintenance on Void Linux",
                "description": "What to do when disk space is full after not paying attention after many months if not years of using Void Linux.",
                "url": "https://raskell.io/articles/disk-space-void-linux-maintenance/",
                "isPartOf": {
                    "@id": "https://raskell.io/articles/disk-space-void-linux-maintenance//#webpage"
                },
                "mainEntityOfPage": {
                    "@id": "https://raskell.io/articles/disk-space-void-linux-maintenance//#webpage"
                },
                "inLanguage": "en",
                "author": {
                    "@type": "Person",
                    "@id": "https://raskell.io/#person"
                },
                "publisher": {
                    "@id": "https://raskell.io/#person"
                }
                ,
                "datePublished": "2024-05-01T00:00:00+00:00"
                
                
                
                ,
                "wordCount": 599
                
                ,
                "image": "https://raskell.io/void-disk-usage.avif"
                
            }
            
            
        ]
    }
    </script><body><a class=skip-link href=#main-content>Skip to main content</a><header class=navbar role=banner><div class=container><div class=flex><div><a aria-label="Raskell Home" class=brand href=https://raskell.io> <img alt aria-hidden=true class=brand-logo src=https://raskell.io/raskell-mascot.avif> <span class=brand-text>Raskell</span> </a></div><nav aria-label="Main navigation" class="flex nav-links" role=navigation><a href=https://raskell.io/articles/>Articles</a><a href=https://raskell.io/projects/>Projects</a><a href=https://raskell.io/speaking/>Speaking</a><a href=https://raskell.io/about/>About</a><button title="Search (/)" aria-label=Search class=search-toggle type=button><svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=11 cy=11 r=8 /><path d="m21 21-4.3-4.3"/></svg></button><button aria-label="Toggle color theme" title="Toggle theme" aria-live=polite class=theme-toggle type=button><span class=theme-toggle__icons> <span aria-hidden=true class=theme-toggle__sun> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=4 /><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg> </span> <span aria-hidden=true class=theme-toggle__moon> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg> </span> <span aria-hidden=true class=theme-toggle__auto> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=10 /><path d="M12 2a7 7 0 1 0 7 7"/></svg> </span> </span></button></nav><button aria-label="Open navigation menu" aria-controls=mobile-menu-overlay aria-expanded=false class=mobile-menu-button id=mobile-menu-button><svg viewbox="0 0 24 24" aria-hidden=true class=menu-icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24><line x1=3 x2=21 y1=6 y2=6></line><line x1=3 x2=21 y1=12 y2=12></line><line x1=3 x2=21 y1=18 y2=18></line></svg> <svg viewbox="0 0 24 24" aria-hidden=true class=close-icon fill=none height=24 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=24><line x1=18 x2=6 y1=6 y2=18></line><line x1=6 x2=18 y1=6 y2=18></line></svg></button></div></div></header><div aria-label="Navigation menu" aria-hidden=true aria-modal=true class=mobile-menu-overlay id=mobile-menu-overlay role=dialog><nav aria-label="Mobile navigation" class=mobile-menu-content role=navigation><a href=https://raskell.io/articles/>Articles</a><a href=https://raskell.io/projects/>Projects</a><a href=https://raskell.io/speaking/>Speaking</a><a href=https://raskell.io/about/>About</a><button class="search-toggle mobile-search-toggle" aria-label=Search type=button><svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=11 cy=11 r=8 /><path d="m21 21-4.3-4.3"/></svg> <span class=search-label>Search</span></button><button aria-label="Toggle theme" class="theme-toggle mobile-theme-toggle" type=button><span class=theme-toggle__icons> <span aria-hidden=true class=theme-toggle__sun> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=4 /><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg> </span> <span aria-hidden=true class=theme-toggle__moon> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg> </span> <span aria-hidden=true class=theme-toggle__auto> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=10 /><path d="M12 2a7 7 0 1 0 7 7"/></svg> </span> </span> <span class=theme-label>Toggle theme</span></button></nav></div><div aria-labelledby=search-title aria-modal=true class=search-overlay role=dialog><div class=search><h2 class=sr-only id=search-title>Search</h2><div class=search__input-wrapper><span aria-hidden=true class=search__icon> <svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><circle cx=11 cy=11 r=8 /><path d="m21 21-4.3-4.3"/></svg> </span><input aria-label="Search query" placeholder="Search articles..." autocomplete=off class=search__input type=search><span aria-hidden=true class=search__shortcut>/</span><button aria-label="Close search" title="Close (Esc)" class=search__close type=button><svg viewbox="0 0 24 24" fill=none height=20 stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 width=20 xmlns=http://www.w3.org/2000/svg><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></button></div><div aria-label="Search results" class=search__results role=listbox></div><footer class=search__footer><nav aria-label="Keyboard shortcuts" class=search__hints><span class=search__hint><kbd>↑</kbd><kbd>↓</kbd> Navigate</span><span class=search__hint><kbd>↵</kbd> Select</span><span class=search__hint><kbd>esc</kbd> Close</span></nav></footer></div></div><main aria-label="Main content" id=main-content role=main><div class=container><article><header class=article-header><div class=thumb><div><h1>Disk space maintenance on Void Linux</h1><div class=post-meta><div class=meta-line><span class=author>Raffael</span><span class=separator>·</span><time>May 01, 2024</time><span class=separator>·</span><span class=reading-time>3 min read</span></div></div></div></div><img alt="Disk space maintenance on Void Linux" class=post-thumbnail decoding=async loading=lazy src=/void-disk-usage.avif></header></article><div class=article-post><h2 id=monday-morning-surprise>Monday morning surprise</h2><p>As I spent most time doing stuff with my computer rather than configuring my beloved Linux distribution, Void Linux, I have developed the tendency to not really bother about Void at all until something crucial becomes unusable. After almost two years of having switched from Arch to Void, I have actually never encountered any major problem and felt I had made the right decision.<p>I checked my disk usage out of curiosity if the 250GB solid-state disk would be enough. And there came the surprise:<pre class=language-shell data-lang=shell><code class=language-shell data-lang=shell>$ df -H
Filesystem      Size  Used Avail Use% Mounted on
devtmpfs        8.4G     0  8.4G   0% /dev
tmpfs           8.4G  1.9M  8.4G   1% /dev/shm
tmpfs           8.4G  1.4M  8.4G   1% /run
/dev/nvme0n1p3  138G  117G   21G  85% /
efivarfs        158k   85k   69k  56% /sys/firmware/efi/efivars
cgroup          8.4G     0  8.4G   0% /sys/fs/cgroup
/dev/nvme0n1p4  366G   34G  332G  10% /home
/dev/nvme0n1p1  536M  152k  536M   1% /boot/efi
tmpfs           8.4G   25k  8.4G   1% /tmp
</code></pre><p>My root partition was full, way too full in my opinion. Did I miss something? Is Void not what I was looking for after all? I don’t enjoy baby sitting my OS <em>du jour</em>.<h2 id=the-painless-solution>The painless solution</h2><p>After a quick Brave search, I ended up finding what I was looking for. Some kind fellow software engineer from China didn’t shy away to make a blog post about his journey when he faced the very same problem. Out of annoyance of having to deal with that, I copy-pasted as quickly as possible, not minding what kind of side-effects I might run into, these three commands.<h3 id=1-cleaning-the-package-cache>1. Cleaning the package cache</h3><p>All the knowledge I was lacking was to be found with the man page of <code>xbps-remove</code>.<pre class=language-shell data-lang=shell><code class=language-shell data-lang=shell># xbps-remove -yO
</code></pre><p>The <a href=https://man.voidlinux.org/xbps-remove.1#O, rel=noopener target=_blank>man page</a> of <code>xbps-remove</code> tells us the <code>-O</code> parameter takes care of <em>cleaning the cache directory removing obsolete binary packages.</em> Obsolete binary packages? Good riddance! I was surprised this to learn that solely this step freed up almost half of my used root partition disk space.<h3 id=2-removing-orphaned-packages>2. Removing orphaned packages</h3><pre class=language-shell data-lang=shell><code class=language-shell data-lang=shell># xbps-remove -yo
</code></pre><p>Here the same <a href=https://man.voidlinux.org/xbps-remove.1#o, rel=noopener target=_blank>man page</a> tells us that the <code>-o</code> parameter takes care of <em>removing installed package orphans that were installed automatically (as dependencies) and are not currently dependencies of any installed package.</em> As before, good riddance!<h3 id=3-purging-old-unused-kernels>3. Purging old, unused kernels</h3><p>This one is interesting. While I knew about the circumstance that the people behind Void had developed their own package management ecosystem, I hadn’t fully realized there were other utilities that came along with the upstream Void installation which were there for me to manage my beloved OS. So, apparently, one of these is a <a href=https://github.com/void-linux/void-packages/blob/master/srcpkgs/base-files/files/vkpurge rel=noopener target=_blank>shell script</a> name <code>vkpurge</code>, I must assume as a short name for <code>Void's Kernel purging</code> tool. I like this type of naming heavily implying its functionality.<pre class=language-shell data-lang=shell><code class=language-shell data-lang=shell># vkpurge rm all
</code></pre><p>It performed as expected. Old kernel files (and modules?) were indeed purged and freed up even more disk space. I should add that this step is optional as it is always useful to have some old kernels at hand when things hit the fan (which for me, they haven’t in a very, very long time).<h2 id=result>Result</h2><p>I couldn’t be happier.<pre class=language-shell data-lang=shell><code class=language-shell data-lang=shell>$ df -H
Filesystem      Size  Used Avail Use% Mounted on
...
/dev/nvme0n1p3  138G   45G   93G  33% /
...
</code></pre><h2 id=renewal-of-faith>Renewal of faith</h2><p>Overall, why am I even writing this if some other fellow engineer already figured this out? Simply, because I would therefore be able to explain why I have enjoyed my journey with Void as my go-to Linux distribution. It keeps things simple. Some well-documented utilities. As simple that a simple Brave search suffices to find the answer to my problems.<p>This very aspect of Void is worthwhile highlighing. I remember more arcane Linux distributions that had me in their grip in figuring things out. Many Googles searches were necessary and even more trial and errors attempts to get simple things fixed.<p>Now back to my Monday morning.<hr><div class=footnote-definition id=1><sup class=footnote-definition-label>1</sup><p>Painting in header image is “Seaside” by Aleksandr Deyneka</div></div></div><div class=container><nav class="flex container suggested"><a title="Previous post (older)" href=https://raskell.io/articles/mise-ate-my-makefile/ rel=prev> <span>← Previous</span> <strong>Mise ate my Makefile</strong> </a><a title="Next post (newer)" href=https://raskell.io/articles/all-beginning-is-haskell/ rel=next> <span>Next →</span> <strong>All beginning is Haskell</strong> </a></nav></div></main><footer class="footer flex" role=contentinfo><section class=container><nav aria-label="Footer navigation" class=footer-links role=navigation><a href=https://raskell.io/rss.xml>RSS</a></nav></section><script src=https://raskell.io/app.js></script></footer><script src=https://raskell.io/anchors.js></script><script src=https://raskell.io/scroll-to-top.js></script><script>lucide.createIcons()</script><script src=https://raskell.io/elasticlunr.min.js></script><script src=https://raskell.io/search_index.en.js></script><script src=https://raskell.io/search.js></script>